

files := $(shell ls *.c *.cpp 2>/dev/null )

#####################################################################
#获取所有 .c .cpp 文件 src=$(wildcard *.c *.cpp ./sub/*.c) 
#####################################################################
source=$(wildcard $(files)) 
header=-I./ -I../depend/include 
libs=-L./ -L../depend/lib

#####################################################################
#编译器使用 g++ 或 gcc 
#####################################################################
CC=g++

#####################################################################
#将变量 source 的路径都去掉 例如 ./test/aaa.c 转换为 aaa.c
#####################################################################
#source=$(notdir $(source))

#####################################################################
#声明 all clean 为伪目标
#####################################################################
.PHONY:all clean

#####################################################################
#要编译生成的程序列表
#####################################################################
#target=helloworld1 helloworld2
target=AClient

all:$(target) 
#####################################################################
#编译并输出 compiling hello world 文字 @echo "some word"
#####################################################################
$(target):$(source)
	@echo "-- compiling $(target)-- "
	$(CC) -o $(target) $(header) $(libs) $(source)

install:
	cp -f $(target) ../bin

clean:
	-rm -f $(target) *.o

