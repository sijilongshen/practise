#####################################################################
#获取所有 .c .cpp 文件 src=$(wildcard *.c *.cpp ./sub/*.c) 
#####################################################################
source=$(wildcard *.c)
header=$(wildcard ../include/*.h)

#####################################################################
#编译器使用 g++ 或 gcc 
#####################################################################
CC=gcc

#####################################################################
#将变量 source 的路径都去掉 例如 ./test/aaa.c 转换为 aaa.c
#####################################################################
#source=$(notdir $(source))

#####################################################################
#将变量 source 里的所有 .c 转换为 .o
#####################################################################
objects=$(patsubst %.c,%.o,$(source))

#####################################################################
#声明宏定义
#####################################################################
DEFINE=-DBUILD_SVN_PREDEF=12345

#####################################################################
#声明 all clean 为伪目标
#####################################################################
.PHONY:all clean

#####################################################################
#要编译生成的程序列表
#####################################################################
#target=helloworld1 helloworld2
target=hello

all:$(target) 
#####################################################################
#程序 helloworld1 helloworld2 的编译命令
#####################################################################
# helloworld1:$(objects)
# 	cc -o helloworld1 $(header) $(objects)

# helloworld2:$(objects)
# 	cc -o helloworld2 $(header) $(objects)

#####################################################################
#编译并输出 compiling hello world 文字 @echo "some word"
#####################################################################
hello:$(objects)
	@echo "-- compiling hello world -- "
	cc -o hello $(header) $(objects) $(DEFINE)

clean:
	-rm $(target) $(objects)